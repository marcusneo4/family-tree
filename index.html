<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soon Family Tree</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="top-controls">
        <div class="app-title">
            <img class="title-logo" src="tree.svg" alt="Tree logo">
            <span class="title-text">Soon Family Tree <span class="title-cn" lang="zh-Hans">å­™</span></span>
        </div>
        <div class="view-controls">
            <div class="mode-toggle">
                <button class="control-btn mode-btn is-active" id="modeDiscreetBtn" data-mode="discreet" title="Discreet mode (photos hidden)">
                    <i class="fas fa-eye-slash"></i>
                </button>
                <button class="control-btn mode-btn" id="modeFilledBtn" data-mode="filled" title="Filled mode (photos shown)">
                    <i class="fas fa-images"></i>
                </button>
                <button class="control-btn mode-btn" id="modeQuizBtn" data-mode="quiz" title="Quiz mode (photos shuffled)">
                    <i class="fas fa-brain"></i>
                </button>
            </div>
            <button class="control-btn stats-btn" id="statsBtn" title="Statistics">
                <i class="fas fa-chart-bar"></i>
                <span>Stats</span>
            </button>
            <button class="control-btn stats-btn" id="bloodlineFilterBtn" title="Toggle main bloodline filter">
                <i class="fas fa-seedling"></i>
                <span>Bloodline</span>
            </button>
            <button class="control-btn" id="refreshPhotosBtn" title="Remove all photos from tree">
                <i class="fas fa-sync-alt"></i>
            </button>
            <div style="position: relative;">
                <button class="control-btn" id="exportBtn" title="Export">
                    <i class="fas fa-download"></i>
                </button>
                <div class="export-menu" id="exportMenu">
                    <div class="export-menu-item" id="exportJsonBtn">
                        <i class="fas fa-file-code"></i>
                        <span>Export JSON</span>
                    </div>
                    <div class="export-menu-item" id="printBtn">
                        <i class="fas fa-print"></i>
                        <span>Print Tree</span>
                    </div>
                </div>
            </div>
            <button class="control-btn" id="zoomOutBtn" title="Zoom Out">
                <i class="fas fa-search-minus"></i>
            </button>
            <button class="control-btn" id="zoomInBtn" title="Zoom In">
                <i class="fas fa-search-plus"></i>
            </button>
            <button class="control-btn dark-mode-toggle" id="darkModeBtn" title="Toggle Dark Mode">
                <i class="fas fa-moon"></i>
            </button>
            <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
                <i class="fas fa-expand"></i>
            </button>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Stats Modal -->
    <div class="stats-modal" id="statsModal">
        <div class="stats-modal-content">
            <div class="stats-header">
                <h2 class="stats-title">Family Statistics</h2>
                <span class="stats-close" id="statsCloseBtn">&times;</span>
            </div>
            <div class="stats-grid" id="statsGrid">
                <!-- Stats will be generated here -->
            </div>
            <div class="stats-section">
                <h3 class="stats-section-title">
                    <i class="fas fa-layer-group"></i>
                    Generation Breakdown
                </h3>
                <div class="generation-stats" id="generationStats">
                    <!-- Generation stats will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <div class="main-content-wrapper">
        <div class="tree-wrapper" id="treeWrapper">
            <div class="tree-container" id="treeContainer">
                <svg class="connection-lines" id="connectionLines"></svg>
                <div class="tree" id="familyTree">
                    <!-- Family tree will be generated here -->
                </div>
            </div>
        </div>

        <!-- Profile Sidebar -->
        <div id="profileSidebar" class="profile-sidebar">
            <div class="profile-sidebar-content">
                <div class="profile-header">
                    <h2 class="profile-title">MEMBER PROFILE</h2>
                    <span class="profile-close">&times;</span>
                </div>
                <div class="profile-body">
                    <div class="profile-photo-container">
                        <img id="profilePhoto" src="" alt="" class="profile-photo-img">
                        <div id="profilePhotoPlaceholder" class="profile-photo-placeholder">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    
                    <form id="profileEditForm" class="profile-edit-form">
                        <div class="form-group">
                            <label for="profileFirstName">First Name:</label>
                            <input type="text" id="profileFirstName" required>
                        </div>
                        <div class="form-group">
                            <label for="profileLastName">Last Name:</label>
                            <input type="text" id="profileLastName" required>
                        </div>
                        <div class="form-group">
                            <label for="profileBirthday">Birthday:</label>
                            <input type="text" id="profileBirthday" placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                        </div>
                        <div class="form-group">
                            <label for="profileGender">Gender:</label>
                            <select id="profileGender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="profileRelationship">Relationship Status:</label>
                            <select id="profileRelationship">
                                <option value="single">Single</option>
                                <option value="bf_gf">BF/GF</option>
                                <option value="dating">Dating</option>
                                <option value="married">Married</option>
                            </select>
                        </div>
                        <div class="form-group inline-checkbox">
                            <label class="checkbox-label" for="profilePassedOn">
                                <input type="checkbox" id="profilePassedOn">
                                <span>Passed on</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="profileBiography">Biography:</label>
                            <textarea id="profileBiography" rows="4" placeholder="No biography added yet."></textarea>
                        </div>
                        <div class="profile-form-actions">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </form>
                    
                    <div class="profile-actions">
                        <button class="profile-btn add-child-btn" id="addChildBtn">
                            <i class="fas fa-baby"></i>
                            <span>Add Child</span>
                        </button>
                        <button class="profile-btn add-spouse-btn" id="addSpouseBtn">
                            <i class="fas fa-heart"></i>
                            <span>Add Spouse</span>
                        </button>
                    </div>
                    
                    <div class="family-members-section">
                        <div class="family-group">
                            <div class="family-label">Parents</div>
                            <div id="profileParents" class="family-list"></div>
                        </div>
                        <div class="family-group">
                            <div class="family-label">Children</div>
                            <div id="profileChildren" class="family-list"></div>
                        </div>
                        <div class="family-group">
                            <div class="family-label">Grandchildren</div>
                            <div id="profileGrandchildren" class="family-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="photo-gallery">
        <div class="gallery-label">PHOTOS</div>
        <button class="gallery-nav-btn left" id="galleryPrevBtn">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div class="gallery-container" id="photoGallery">
            <!-- Photos will be generated here -->
        </div>
        <button class="gallery-nav-btn right" id="galleryNextBtn">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <!-- Modal for adding/editing family members -->
    <div id="memberModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Add Family Member</h2>
            <form id="memberForm">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="age">Age:</label>
                    <input type="number" id="age" min="0" max="150">
                </div>
                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select id="gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="relationshipStatus">Relationship Status:</label>
                    <select id="relationshipStatus">
                        <option value="single">Single</option>
                        <option value="bf_gf">BF/GF</option>
                        <option value="dating">Dating</option>
                        <option value="married">Married</option>
                    </select>
                </div>
                <div class="form-group inline-checkbox">
                    <label class="checkbox-label" for="passedOn">
                        <input type="checkbox" id="passedOn">
                        <span>Passed on</span>
                    </label>
                </div>
                <div class="form-group">
                    <label for="photo">Photo URL (optional):</label>
                    <input type="text" id="photo" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label for="relation">Relation:</label>
                    <select id="relation">
                        <option value="parent">Parent</option>
                        <option value="child">Child</option>
                        <option value="spouse">Spouse</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>


    <script src="script.js"></script>
</body>
</html>

